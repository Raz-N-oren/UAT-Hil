<template>
    <c-ux-debounced-input
        class = "debounced"
        label={label}
        onchange={handleKeyChange}
        onfocus = {handleFocus}
        onblure = {handleBlure}
        placeholder={placeholder}
    ></c-ux-debounced-input>
    <!-- <template>
        <c-ux-debounced-input
            class = "debounced"
            onfocus = {handleFocus}
            onblure = {handleBlure}
            label={label}
            placeholder={placeholder}
            onchange={handleKeyChange}
            if:false={selectedRecord}
            value={lastSearchValue}
            is-required={isInputRequired}
        ></c-ux-debounced-input>
    </template> -->

    <!-- Dropdown results part -->
	<!-- <ul
        style="min-height: 140px; margin-top: 0px !important"
        class="products-results slds-scrollable_y slds-listbox slds-listbox_vertical slds-dropdown slds-dropdown_right slds-dropdown_fluid slds-lookup__menu slds"
        role="listbox"
    >check1
        <lightning-spinner
            alternative-text="Loading"
            variant="brand"
            size="small"
            if:true={showSpinner}
        ></lightning-spinner>
        <center>{message}</center>
        <template if:true={results}>
            <li role="presentation" class="slds-listbox__item">
                <div
                    aria-selected="true"
                    id="option0"
                    class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_term slds-has-focus"
                    role="option"
                >
                    <span class="slds-media__figure slds-listbox__option-icon">
                        <span class="slds-icon_container slds-icon-utility-search" title="חפש מוצר">
                            <lightning-icon	icon-name="utility:search" alternative-text="חפש" size="small">
                            </lightning-icon>
                            <span class="slds-assistive-text">חפש מוצר</span>
                        </span>
                    </span>
                    <span class="slds-media__body">
                        <span class="slds-listbox__option-text slds-listbox__option-text_entity">{lastSearchValue}
                        </span>
                    </span>
                </div>
            </li>
            <template for:each={results} for:item="singleRec"> -->
                <!-- <c-custom-lookup-field-result key={singleRec.Id} record={singleRec}></c-custom-lookup-field-result> -->
            <!-- </template>
        </template>
    </ul> -->

    <template if:true={results}>
        <div id="listbox-id-2-venu" data-key="dropdownresult"
            class="slds-show slds-dropdown slds-dropdown_length-with-icon-7 slds-dropdown_fluid"
            role="listbox">
            <ul class="products-results slds-listbox slds-listbox_vertical" role="presentation">
                <template if:false={hideMessage}>
                    <div dir="rtl"> {message} </div>
                </template>
                <lightning-spinner alternative-text="Loading" variant="brand" size="small"
                    if:true={showSpinner}>
                </lightning-spinner>
                <template for:each={results} for:item="record">
                    <li id={record.Id} key={record.Id} onclick={onRecordSelection}
                        role="presentation" class="slds-listbox__item">
                        <div data-key={record.Id} data-name={record.Name}
                            class="slds-media slds-listbox__option slds-listbox__option_entity slds-listbox__option_has-meta"
                            role="option">
                            <span class="slds-media__figure slds-listbox__option-icon">
                                <span class="slds-icon_container">
                                    <!-- <lightning-icon icon-name={record.iconName} size="small">
                                    </lightning-icon> -->
                                </span>
                            </span>
                            <span class="slds-media__body">
                                <span data-key={record.Id} data-name={record.Name}
                                    class="slds-listbox__option-text slds-listbox__option-text_entity">{record.Name}</span>
                                    <span class="slds-listbox__option-meta" data-key={record.Id} onclick={onRecordSelection} data-name={record.Name}>{record.Sap_Number__c} - {record.LastViewedDate}</span>
                                </span>
                            </div>
                    </li>
                </template>
            </ul>
        </div>
    </template>
</template>